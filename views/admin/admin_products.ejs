<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Bad Thrifts</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <script src="/js/main_js.js" defer></script>
    <script src="/js/admin.js" defer></script>
</head>
<body>
    <%- include('/admin_header') %>

    <!-- ========== PRODUCTS SECTION ========== -->
    <section class="add-product-section" id="addProductSection">
        <button class="add-product" id="addProduct">Add Product +</button>
        <div class="products-men" id="productsMen">
            <h1><strong>MEN</strong></h1>
            <div class="new-arrival-men">
                <h2>New Arrival</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tops-men">
                <h2>Tops</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pants-men">
                <h2>Pants</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="shorts-men">
                <h2>Shorts</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="hoodies-men">
                <h2>Hoodies</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="products-women" id="productsWomen">
            <h1><strong>WOMEN</strong></h1>
            <div class="new-arrival-women">
                <h2>New Arrival</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tops-women">
                <h2>Tops</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pants-women">
                <h2>Pants</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="shorts-women">
                <h2>Shorts</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="hoodies-women">
                <h2>Hoodies</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="img/product1.jpg" alt="Product 1">
                        </div>
                        <div class="product-info">
                            <span class="price">₱600</span>
                            <h3>Lorem Ipsum</h3>
                            <p>Lorem Ipsum</p>
                            <span class="stock-label">Stock: 1</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADD PRODUCTS MODAL ========== -->
    <div class="add-product-modal" id="addProductModal">
        <div class="add-product-content">
            <span class="close-btn" id="closeProducts">&times;</span>
            <h1><strong>bad thrifts.</strong></h1>
            <label>Product Name: <input type="text" required></label>
            <label>Brand: <input type="text" required></label>
            <label>Product Description: <input type="text" required></label>
            <label>Price: <input type="number" required></label>
            <label>Size: <input type="text" required></label>
            <label>Category: <select required>
                <option>Men</option>
                <option>Women</option>
            </select></label>
            <label>Clothing: <br>
                <input type="checkbox" name="clothing" value="New Arrival"> New Arrival <br>
                <input type="checkbox" name="clothing" value="Tops"> Tops <br>
                <input type="checkbox" name="clothing" value="Pants"> Pants <br>
                <input type="checkbox" name="clothing" value="Shorts"> Shorts <br>
                <input type="checkbox" name="clothing" value="Hoodies"> Hoodies <br>
            </label>
            <label>Stock: <input type="number" value="1"></label>
            <input type="file" id="imageInput" name="image" accept="image/*"/>
            <button class="add-product-btn">Add Product</button>
        </div>
    </div>

     <!-- ✅ ✅ ✅ NEW: DYNAMIC PRODUCTS CRUD SECTION START -->
  <section class="products-admin">
    <h2>All Products (Database)</h2>
    <div class="products-grid">
      <% products.forEach(product => { %>
        <div class="product-card">
          <div class="product-image">
            <img src="/img/<%= product.image || 'placeholder.jpg' %>" alt="<%= product.category %>">
          </div>
          <div class="product-info">
            <span class="price">₱<%= product.price %></span>
            <h3><%= product.category %></h3>
            <p>Size: <%= product.size %></p>
            <p>Type: <%= product.clothingTypes ? product.clothingTypes.join(', ') : '' %></p>
            <span class="stock-label">Stock: <%= product.stock %></span>

            <!-- Admin actions -->
            <a href="/products/<%= product._id %>/edit">Edit</a>
            <form action="/products/<%= product._id %>?_method=DELETE" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure you want to delete this product?')">
                Delete
              </button>
            </form>
          </div>
        </div>
      <% }) %>
    </div>
  </section>
  <!-- ✅ ✅ ✅ NEW: DYNAMIC PRODUCTS CRUD SECTION END -->

    <%- include('partials/footer') %>
</body>
</html>
